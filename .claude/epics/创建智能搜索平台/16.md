---
id: 007
title: 前端界面开发
epic: 创建智能搜索平台
status: pending
priority: high
assignee: ""
labels: ["Vue", "前端界面", "管理后台", "移动端适配", "shadcn风格"]
created: 2025-09-20T02:23:58Z
updated: 2025-09-20T02:45:32Z
estimate: L
parallel: true
dependencies: [004, 005, 006]
---

# 前端界面开发

## 描述

开发智能搜索平台的前端界面，包括Vue搜索组件、shadcn风格管理后台界面、移动端适配搜索页面。提供直观易用的用户界面，支持多种搜索交互方式和响应式设计，确保在不同设备上的最佳用户体验。

## 验收标准

- [ ] 搜索组件响应时间 < 100ms (输入响应)
- [ ] 管理后台界面完整实现shadcn设计系统
- [ ] 移动端适配支持iOS Safari、Android Chrome
- [ ] 搜索页面Lighthouse性能评分 > 90
- [ ] 管理后台支持暗色/亮色主题切换
- [ ] 搜索建议下拉列表响应时间 < 50ms
- [ ] 支持键盘导航和无障碍访问(WCAG 2.1 AA)
- [ ] 所有页面在3G网络下加载时间 < 3秒
- [ ] 跨浏览器兼容性(Chrome、Firefox、Safari、Edge)
- [ ] 搜索结果页支持无限滚动加载
- [ ] 管理后台表格支持排序、筛选、分页
- [ ] 移动端触摸交互体验优化

## 技术细节

### Vue搜索组件

**智能搜索框组件**
```vue
<template>
  <div class="search-container">
    <div class="search-input-wrapper">
      <input
        v-model="searchQuery"
        @input="handleInput"
        @keydown="handleKeydown"
        @focus="showSuggestions = true"
        placeholder="搜索您需要的内容..."
        class="search-input"
        ref="searchInput"
      />
      <button @click="performSearch" class="search-button">
        <SearchIcon />
      </button>
    </div>

    <SearchSuggestions
      v-if="showSuggestions && suggestions.length"
      :suggestions="suggestions"
      :highlighted-index="highlightedIndex"
      @select="selectSuggestion"
      @close="closeSuggestions"
    />
  </div>
</template>

<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'
import { debounce } from 'lodash-es'
import { useSearchStore } from '@/stores/search'
import SearchSuggestions from './SearchSuggestions.vue'
import SearchIcon from '@/components/icons/SearchIcon.vue'

const searchStore = useSearchStore()
const searchQuery = ref('')
const suggestions = ref([])
const showSuggestions = ref(false)
const highlightedIndex = ref(-1)
const searchInput = ref(null)

// 防抖搜索建议
const debouncedGetSuggestions = debounce(async (query) => {
  if (query.length >= 2) {
    try {
      suggestions.value = await searchStore.getSuggestions(query)
    } catch (error) {
      console.error('获取搜索建议失败:', error)
    }
  } else {
    suggestions.value = []
  }
}, 300)

const handleInput = () => {
  highlightedIndex.value = -1
  debouncedGetSuggestions(searchQuery.value)
}

const handleKeydown = (event) => {
  if (!showSuggestions.value || !suggestions.value.length) {
    if (event.key === 'Enter') {
      performSearch()
    }
    return
  }

  switch (event.key) {
    case 'ArrowDown':
      event.preventDefault()
      highlightedIndex.value = Math.min(
        highlightedIndex.value + 1,
        suggestions.value.length - 1
      )
      break
    case 'ArrowUp':
      event.preventDefault()
      highlightedIndex.value = Math.max(highlightedIndex.value - 1, -1)
      break
    case 'Enter':
      event.preventDefault()
      if (highlightedIndex.value >= 0) {
        selectSuggestion(suggestions.value[highlightedIndex.value])
      } else {
        performSearch()
      }
      break
    case 'Escape':
      closeSuggestions()
      searchInput.value?.blur()
      break
  }
}

const selectSuggestion = (suggestion) => {
  searchQuery.value = suggestion.text
  closeSuggestions()
  performSearch()
}

const performSearch = () => {
  if (searchQuery.value.trim()) {
    searchStore.search(searchQuery.value.trim())
    closeSuggestions()
  }
}

const closeSuggestions = () => {
  showSuggestions.value = false
  highlightedIndex.value = -1
}

// 点击外部关闭建议
const handleClickOutside = (event) => {
  if (!event.target.closest('.search-container')) {
    closeSuggestions()
  }
}

onMounted(() => {
  document.addEventListener('click', handleClickOutside)
})

onUnmounted(() => {
  document.removeEventListener('click', handleClickOutside)
})
</script>

<style scoped>
.search-container {
  position: relative;
  width: 100%;
  max-width: 600px;
}

.search-input-wrapper {
  display: flex;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  overflow: hidden;
  background: white;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.search-input-wrapper:focus-within {
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.search-input {
  flex: 1;
  padding: 12px 16px;
  border: none;
  outline: none;
  font-size: 16px;
  line-height: 1.5;
}

.search-button {
  padding: 12px 16px;
  background: #3b82f6;
  color: white;
  border: none;
  cursor: pointer;
  transition: background-color 0.2s;
}

.search-button:hover {
  background: #2563eb;
}

@media (max-width: 768px) {
  .search-input {
    font-size: 16px; /* 防止iOS缩放 */
  }
}
</style>
```

**搜索结果组件**
```vue
<template>
  <div class="search-results">
    <div v-if="loading" class="loading-state">
      <div class="spinner"></div>
      <p>正在搜索...</p>
    </div>

    <div v-else-if="error" class="error-state">
      <AlertIcon />
      <p>搜索出错，请稍后重试</p>
      <button @click="retry" class="retry-button">重试</button>
    </div>

    <div v-else-if="results.length === 0" class="empty-state">
      <SearchIcon />
      <p>未找到相关结果</p>
      <p class="text-sm text-gray-500">尝试使用不同的关键词或减少搜索条件</p>
    </div>

    <div v-else class="results-list">
      <div class="results-header">
        <p class="results-count">
          找到约 {{ totalCount.toLocaleString() }} 条结果 (用时 {{ searchTime }}秒)
        </p>
        <div class="sort-options">
          <select v-model="sortBy" @change="handleSortChange">
            <option value="relevance">相关度</option>
            <option value="date">时间</option>
            <option value="popularity">热度</option>
          </select>
        </div>
      </div>

      <SearchResultItem
        v-for="result in results"
        :key="result.id"
        :result="result"
        :query="query"
        @click="trackClick"
      />

      <div
        v-if="hasMore"
        ref="loadMore"
        class="load-more-trigger"
      >
        <div v-if="loadingMore" class="loading-more">
          <div class="spinner-small"></div>
          <span>加载更多...</span>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'
import { useSearchStore } from '@/stores/search'
import { useIntersectionObserver } from '@vueuse/core'
import SearchResultItem from './SearchResultItem.vue'
import SearchIcon from '@/components/icons/SearchIcon.vue'
import AlertIcon from '@/components/icons/AlertIcon.vue'

const props = defineProps({
  query: String
})

const searchStore = useSearchStore()
const loadMore = ref(null)
const sortBy = ref('relevance')

const results = computed(() => searchStore.results)
const loading = computed(() => searchStore.loading)
const loadingMore = computed(() => searchStore.loadingMore)
const error = computed(() => searchStore.error)
const totalCount = computed(() => searchStore.totalCount)
const searchTime = computed(() => searchStore.searchTime)
const hasMore = computed(() => searchStore.hasMore)

const handleSortChange = () => {
  searchStore.setSort(sortBy.value)
  searchStore.search(props.query)
}

const retry = () => {
  searchStore.search(props.query)
}

const trackClick = (result) => {
  searchStore.trackClick({
    resultId: result.id,
    query: props.query,
    position: results.value.indexOf(result)
  })
}

// 无限滚动
const { stop } = useIntersectionObserver(
  loadMore,
  ([{ isIntersecting }]) => {
    if (isIntersecting && hasMore.value && !loadingMore.value) {
      searchStore.loadMore()
    }
  },
  { threshold: 0.1 }
)

onUnmounted(() => {
  stop()
})
</script>

<style scoped>
.search-results {
  width: 100%;
}

.loading-state,
.error-state,
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
}

.spinner {
  width: 32px;
  height: 32px;
  border: 3px solid #f3f4f6;
  border-top: 3px solid #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.spinner-small {
  width: 20px;
  height: 20px;
  border: 2px solid #f3f4f6;
  border-top: 2px solid #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.results-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 1px solid #e5e7eb;
}

.results-count {
  color: #6b7280;
  font-size: 14px;
}

.sort-options select {
  padding: 4px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 14px;
}

.load-more-trigger {
  height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.loading-more {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #6b7280;
  font-size: 14px;
}

.retry-button {
  margin-top: 16px;
  padding: 8px 16px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.retry-button:hover {
  background: #2563eb;
}

@media (max-width: 768px) {
  .results-header {
    flex-direction: column;
    gap: 10px;
    align-items: flex-start;
  }
}
</style>
```

### shadcn风格管理后台

**管理后台布局**
```vue
<template>
  <div class="admin-layout">
    <aside class="sidebar" :class="{ collapsed: sidebarCollapsed }">
      <div class="sidebar-header">
        <h1 v-if="!sidebarCollapsed">智能搜索管理</h1>
        <button @click="toggleSidebar" class="toggle-btn">
          <MenuIcon />
        </button>
      </div>

      <nav class="sidebar-nav">
        <router-link
          v-for="item in navigationItems"
          :key="item.path"
          :to="item.path"
          class="nav-item"
          :class="{ active: $route.path === item.path }"
        >
          <component :is="item.icon" class="nav-icon" />
          <span v-if="!sidebarCollapsed" class="nav-text">{{ item.label }}</span>
        </router-link>
      </nav>
    </aside>

    <main class="main-content">
      <header class="top-header">
        <div class="header-left">
          <h2>{{ pageTitle }}</h2>
        </div>
        <div class="header-right">
          <button @click="toggleTheme" class="theme-toggle">
            <SunIcon v-if="isDark" />
            <MoonIcon v-else />
          </button>
          <div class="user-menu">
            <img :src="userAvatar" alt="用户头像" class="avatar" />
            <span>{{ userName }}</span>
          </div>
        </div>
      </header>

      <div class="content-area">
        <router-view />
      </div>
    </main>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useRoute } from 'vue-router'
import { useTheme } from '@/composables/useTheme'
import MenuIcon from '@/components/icons/MenuIcon.vue'
import SunIcon from '@/components/icons/SunIcon.vue'
import MoonIcon from '@/components/icons/MoonIcon.vue'
import DashboardIcon from '@/components/icons/DashboardIcon.vue'
import SearchIcon from '@/components/icons/SearchIcon.vue'
import AnalyticsIcon from '@/components/icons/AnalyticsIcon.vue'
import SettingsIcon from '@/components/icons/SettingsIcon.vue'

const route = useRoute()
const { isDark, toggleTheme } = useTheme()

const sidebarCollapsed = ref(false)
const userName = ref('管理员')
const userAvatar = ref('/avatars/admin.jpg')

const navigationItems = [
  { path: '/admin/dashboard', label: '仪表板', icon: DashboardIcon },
  { path: '/admin/search', label: '搜索管理', icon: SearchIcon },
  { path: '/admin/analytics', label: '统计分析', icon: AnalyticsIcon },
  { path: '/admin/settings', label: '系统设置', icon: SettingsIcon }
]

const pageTitle = computed(() => {
  const item = navigationItems.find(item => item.path === route.path)
  return item?.label || '管理后台'
})

const toggleSidebar = () => {
  sidebarCollapsed.value = !sidebarCollapsed.value
}
</script>

<style scoped>
.admin-layout {
  display: flex;
  height: 100vh;
  background: var(--background);
  color: var(--foreground);
}

.sidebar {
  width: 250px;
  background: var(--card);
  border-right: 1px solid var(--border);
  transition: width 0.3s ease;
}

.sidebar.collapsed {
  width: 60px;
}

.sidebar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  border-bottom: 1px solid var(--border);
}

.sidebar-header h1 {
  font-size: 18px;
  font-weight: 600;
  margin: 0;
}

.toggle-btn {
  padding: 8px;
  background: none;
  border: none;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.2s;
}

.toggle-btn:hover {
  background: var(--accent);
}

.sidebar-nav {
  padding: 16px 0;
}

.nav-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  color: var(--muted-foreground);
  text-decoration: none;
  transition: all 0.2s;
  border-radius: 0 25px 25px 0;
  margin-right: 8px;
}

.nav-item:hover {
  background: var(--accent);
  color: var(--accent-foreground);
}

.nav-item.active {
  background: var(--primary);
  color: var(--primary-foreground);
}

.nav-icon {
  width: 20px;
  height: 20px;
  margin-right: 12px;
}

.sidebar.collapsed .nav-text {
  display: none;
}

.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.top-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  background: var(--card);
  border-bottom: 1px solid var(--border);
}

.header-left h2 {
  margin: 0;
  font-size: 24px;
  font-weight: 600;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

.theme-toggle {
  padding: 8px;
  background: none;
  border: 1px solid var(--border);
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.theme-toggle:hover {
  background: var(--accent);
}

.user-menu {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--accent);
  border-radius: 6px;
}

.avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}

.content-area {
  flex: 1;
  padding: 24px;
  overflow-y: auto;
  background: var(--background);
}

/* 响应式设计 */
@media (max-width: 768px) {
  .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1000;
    height: 100vh;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }

  .sidebar.collapsed {
    transform: translateX(0);
    width: 250px;
  }

  .main-content {
    margin-left: 0;
  }
}
</style>
```

### 移动端适配

**响应式搜索页面**
```vue
<template>
  <div class="mobile-search-page">
    <header class="mobile-header">
      <div class="search-container">
        <SmartSearchBox
          v-model="searchQuery"
          @search="handleSearch"
          placeholder="搜索..."
          class="mobile-search-box"
        />
      </div>

      <button
        v-if="hasFilters"
        @click="showFilters = true"
        class="filter-button"
      >
        <FilterIcon />
        <span>筛选</span>
      </button>
    </header>

    <main class="search-content">
      <SearchTabs
        v-if="searchQuery"
        :active-tab="activeTab"
        @tab-change="handleTabChange"
        class="mobile-tabs"
      />

      <SearchResults
        :query="searchQuery"
        :results="results"
        :loading="loading"
        class="mobile-results"
      />
    </main>

    <!-- 移动端筛选抽屉 -->
    <div
      v-if="showFilters"
      class="filter-overlay"
      @click="showFilters = false"
    >
      <div class="filter-drawer" @click.stop>
        <div class="filter-header">
          <h3>搜索筛选</h3>
          <button @click="showFilters = false" class="close-button">
            <CloseIcon />
          </button>
        </div>

        <div class="filter-content">
          <SearchFilters @apply="applyFilters" />
        </div>

        <div class="filter-actions">
          <button @click="resetFilters" class="reset-button">
            重置
          </button>
          <button @click="showFilters = false" class="apply-button">
            应用筛选
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue'
import { useRoute, useRouter } from 'vue-router'
import { useSearchStore } from '@/stores/search'
import SmartSearchBox from '@/components/search/SmartSearchBox.vue'
import SearchTabs from '@/components/search/SearchTabs.vue'
import SearchResults from '@/components/search/SearchResults.vue'
import SearchFilters from '@/components/search/SearchFilters.vue'
import FilterIcon from '@/components/icons/FilterIcon.vue'
import CloseIcon from '@/components/icons/CloseIcon.vue'

const route = useRoute()
const router = useRouter()
const searchStore = useSearchStore()

const searchQuery = ref('')
const activeTab = ref('all')
const showFilters = ref(false)

const results = computed(() => searchStore.results)
const loading = computed(() => searchStore.loading)
const hasFilters = computed(() => searchStore.availableFilters.length > 0)

const handleSearch = (query) => {
  searchQuery.value = query
  searchStore.search(query)

  // 更新URL
  router.push({
    path: '/search',
    query: { q: query, tab: activeTab.value }
  })
}

const handleTabChange = (tab) => {
  activeTab.value = tab
  if (searchQuery.value) {
    searchStore.search(searchQuery.value, { tab })
  }
}

const applyFilters = (filters) => {
  searchStore.setFilters(filters)
  if (searchQuery.value) {
    searchStore.search(searchQuery.value)
  }
  showFilters.value = false
}

const resetFilters = () => {
  searchStore.clearFilters()
  if (searchQuery.value) {
    searchStore.search(searchQuery.value)
  }
}

onMounted(() => {
  // 从URL获取搜索参数
  const query = route.query.q
  const tab = route.query.tab || 'all'

  if (query) {
    searchQuery.value = query
    activeTab.value = tab
    searchStore.search(query, { tab })
  }
})
</script>

<style scoped>
.mobile-search-page {
  min-height: 100vh;
  background: var(--background);
}

.mobile-header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--background);
  border-bottom: 1px solid var(--border);
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
}

.search-container {
  flex: 1;
}

.mobile-search-box {
  width: 100%;
}

.filter-button {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  background: var(--accent);
  border: 1px solid var(--border);
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  white-space: nowrap;
}

.search-content {
  padding: 0 16px 80px; /* 底部留空防止被固定元素遮挡 */
}

.mobile-tabs {
  margin: 16px 0;
}

.mobile-results {
  margin-top: 16px;
}

/* 筛选抽屉样式 */
.filter-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  display: flex;
  align-items: flex-end;
}

.filter-drawer {
  width: 100%;
  max-height: 80vh;
  background: var(--background);
  border-radius: 12px 12px 0 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.filter-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
}

.filter-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
}

.close-button {
  padding: 8px;
  background: none;
  border: none;
  cursor: pointer;
  border-radius: 4px;
}

.filter-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.filter-actions {
  display: flex;
  gap: 12px;
  padding: 16px 20px;
  border-top: 1px solid var(--border);
}

.reset-button,
.apply-button {
  flex: 1;
  padding: 12px;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
}

.reset-button {
  background: var(--secondary);
  color: var(--secondary-foreground);
  border: 1px solid var(--border);
}

.apply-button {
  background: var(--primary);
  color: var(--primary-foreground);
  border: 1px solid var(--primary);
}

/* 触摸优化 */
@media (hover: none) and (pointer: coarse) {
  .filter-button,
  .close-button,
  .reset-button,
  .apply-button {
    min-height: 44px; /* 确保触摸目标足够大 */
  }
}

/* 安全区域适配 */
@supports (padding: max(0px)) {
  .mobile-header {
    padding-top: max(12px, env(safe-area-inset-top));
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
  }

  .search-content {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
    padding-bottom: max(80px, env(safe-area-inset-bottom) + 80px);
  }

  .filter-drawer {
    padding-bottom: env(safe-area-inset-bottom);
  }
}
</style>
```

## 测试要求

### 组件单元测试
```javascript
// tests/components/SmartSearchBox.test.js
import { mount } from '@vue/test-utils'
import { describe, it, expect, vi } from 'vitest'
import SmartSearchBox from '@/components/search/SmartSearchBox.vue'

describe('SmartSearchBox', () => {
  it('应该正确渲染搜索输入框', () => {
    const wrapper = mount(SmartSearchBox)
    expect(wrapper.find('.search-input').exists()).toBe(true)
    expect(wrapper.find('.search-button').exists()).toBe(true)
  })

  it('应该在输入时显示搜索建议', async () => {
    const wrapper = mount(SmartSearchBox)
    const input = wrapper.find('.search-input')

    await input.setValue('test')
    await input.trigger('input')

    // 等待防抖
    setTimeout(() => {
      expect(wrapper.find('.suggestions').exists()).toBe(true)
    }, 300)
  })

  it('应该支持键盘导航', async () => {
    const wrapper = mount(SmartSearchBox)
    const input = wrapper.find('.search-input')

    // 模拟有建议的状态
    await wrapper.setData({
      suggestions: ['test1', 'test2', 'test3'],
      showSuggestions: true
    })

    await input.trigger('keydown', { key: 'ArrowDown' })
    expect(wrapper.vm.highlightedIndex).toBe(0)

    await input.trigger('keydown', { key: 'ArrowDown' })
    expect(wrapper.vm.highlightedIndex).toBe(1)

    await input.trigger('keydown', { key: 'Enter' })
    expect(wrapper.emitted().search).toBeTruthy()
  })
})
```

### E2E测试
```javascript
// tests/e2e/search.spec.js
import { test, expect } from '@playwright/test'

test.describe('搜索功能', () => {
  test('完整搜索流程', async ({ page }) => {
    await page.goto('/')

    // 输入搜索查询
    await page.fill('[data-testid="search-input"]', 'Vue.js')
    await page.click('[data-testid="search-button"]')

    // 验证搜索结果
    await expect(page.locator('[data-testid="search-results"]')).toBeVisible()
    await expect(page.locator('[data-testid="result-item"]').first()).toBeVisible()

    // 验证搜索统计
    await expect(page.locator('[data-testid="results-count"]')).toContainText('找到约')
  })

  test('移动端搜索体验', async ({ page }) => {
    await page.setViewportSize({ width: 375, height: 667 })
    await page.goto('/')

    // 测试触摸交互
    await page.tap('[data-testid="search-input"]')
    await page.fill('[data-testid="search-input"]', 'React')

    // 测试筛选抽屉
    await page.tap('[data-testid="filter-button"]')
    await expect(page.locator('[data-testid="filter-drawer"]')).toBeVisible()

    await page.tap('[data-testid="close-filter"]')
    await expect(page.locator('[data-testid="filter-drawer"]')).not.toBeVisible()
  })
})
```

### 性能测试
```javascript
// tests/performance/lighthouse.test.js
const lighthouse = require('lighthouse')
const chromeLauncher = require('chrome-launcher')

async function runLighthouse() {
  const chrome = await chromeLauncher.launch({ chromeFlags: ['--headless'] })
  const options = { logLevel: 'info', output: 'json', port: chrome.port }

  const runnerResult = await lighthouse('http://localhost:3000', options)

  expect(runnerResult.score.performance).toBeGreaterThan(90)
  expect(runnerResult.score.accessibility).toBeGreaterThan(90)
  expect(runnerResult.score.bestPractices).toBeGreaterThan(90)

  await chrome.kill()
}
```

## 部署配置

### Docker配置
```dockerfile
# frontend.Dockerfile
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

### Nginx配置
```nginx
# nginx.conf
server {
    listen 80;
    server_name _;

    root /usr/share/nginx/html;
    index index.html;

    # Gzip压缩
    gzip on;
    gzip_types text/css application/javascript image/svg+xml;

    # 缓存静态资源
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # SPA路由支持
    location / {
        try_files $uri $uri/ /index.html;
    }

    # API代理
    location /api/ {
        proxy_pass http://backend:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```
